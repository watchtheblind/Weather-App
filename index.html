<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Document</title>
  </head>
  <body>
    <main class="container">
      <article class="w-current-weather-data">
        <div class="w-title"></div>
        <aside class="w-forecast">
          <div class="w-forecast-condition"></div>
          <div class="w-forecast-data">
            <div class="column one">
              <img alt="weather-icon" class="w-forecast-icon" />
            </div>
            <div class="column two">
              <span class="row">
                <div class="w-forecast-temp"></div>
                <div class="w-forecast-temp-F"></div>
              </span>
              <div class="w-forecast-fl"></div>
            </div>
            <div class="column three">
              <div class="w-forecast-datetime"></div>
              <div class="w-forecast-humidity"></div>
              <div class="w-forecast-wind"></div>
            </div>
          </div>
        </aside>
      </article>
    </main>
  </body>
  <script crossorigin="anonymous">
    const forecastTitle = document.querySelector(".w-title");
    const forecastCondition = document.querySelector(".w-forecast-condition");
    const forecastTemp = document.querySelector(".w-forecast-temp");
    const forecastTempF = document.querySelector(".w-forecast-temp-F");
    const forecastIcon = document.querySelector(".w-forecast-icon");
    const forecastHumidity = document.querySelector(".w-forecast-humidity");
    const forecastWind = document.querySelector(".w-forecast-wind");
    const forecastDatetime = document.querySelector(".w-forecast-datetime");
    const forecastFeelsLike = document.querySelector(".w-forecast-fl");
    let weather = {};
    let weatherData;
    async function getWeather() {
      const weatherResponse = await fetch(
        `https://api.weatherapi.com/v1/forecast.json?key=cd81d5e587ec478f95f194224242706&q=maracay&days=5`
      );
      return (weatherData = await weatherResponse.json());
    }
    async function setLocation() {
      // const city = prompt("introduce a city");
      await getWeather();
      console.log(weatherData);
    }
    async function CatchWeatherData() {
      await setLocation();
      return (weather = {
        location: { ...weatherData.location },
        current: { ...weatherData.current },
        forecast: { ...weatherData.forecast },
      });
    }
    async function showWeatherData() {
      await CatchWeatherData();
      forecastCondition.textContent = weather.current.condition.text;
      forecastIcon.src = "https:" + weather.current.condition.icon;
      forecastTemp.textContent = weather.current.temp_c + "°";
      forecastTempF.textContent = weather.current.temp_f + " F°";
      forecastTitle.textContent =
        "Weather in " + weather.location.name + ", " + weather.location.country;
      forecastHumidity.textContent =
        "Humidity: " + weather.current.humidity + "%";
      const Datetime = new Date(
        Date.parse(weather.location.localtime.replace(" ", "T"))
      );
      const dayOfWeek = Datetime.toLocaleString("en-US", { weekday: "short" });
      const hour = Datetime.toLocaleTimeString();
      forecastDatetime.textContent = `${dayOfWeek} ${hour}`;
      forecastWind.textContent = "Wind: " + weather.current.wind_kph + "kph";
      forecastFeelsLike.textContent =
        "Feels like " + weather.current.feelslike_c + "°C";
    }

    showWeatherData();
  </script>
</html>
